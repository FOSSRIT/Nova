{{extend 'csi_view.html'}}
    <div id="editform">
    <fieldset>
    
        <legend>Edit this entry </legend>

                <form method="post" action="{{='http://%s/%s/%s/edit' % (request.env.http_host, request.application, request.controller)}}">
                
                <ul>    
                        <li> <label for="nodeType">Type</label>
                            <select name="nodeType">
                                {{for x in types:}}
                               
                                    <option value="{{=x.id}}" 
                                    
                                    {{if new == "False":}}
                                    
                                        {{if(node.type.id == x.id):}}{{="selected='selected'"}}
                                        {{pass}}
                               
                                    {{elif x.id == 1:}}
                            
                                        {{="selected='selected'"}}
                                    
                                    {{pass}}
                                
                                     >{{=x.value}}</option>
                                
                                {{pass}}
                            </select>
                            
                        </li>
                        
                     
                        
                                <input type="hidden" name="id" value="{{=node.id}}"  />
                                
                                <input type="hidden" name="new" value="{{=new}}"  />
                        
                        
                        <li><label for="name">Name:</label> 
                               
                                 <input type="text" name="name" value="{{=node.name}}"  /><br />
                        
                        </li>        
                               
                        <li><label for="url">URL:</label>       
                             
                                 <input type="text"  name="url" value="{{=node.url}}" /><br />
                        
                        </li>
                        
                        <li><label for="pic_url">Picture URL:</label>       
                                 
                                 <input type="text" size="50px" name="pic_url" value="{{=node.picURL}}" /><br />
                        </li>        
                               <br />
                               <span style="font-size:24px; color:#FFF;">Attributes</span>
                               
                               <br />
                                (Check a box to remove that attribute)
                                <br />
                                <br />
                        
                        {{if attr:}}
                            {{for x in attr:}}
                            
                                {{label=db(db.vocab.id==x.vocab).select()}}
                                
                                {{=label[0].value}}: <li> <input type="text" name="attr.{{=x.id}}" value="{{=x.value}}" /></li>
                                
                                <input type="checkbox" name="removeAttr" value="{{=x.id}}" /><br />
                            {{pass}}
                        {{pass}}
                
                                <input type="hidden" name="removeAttr" value="0" />
                               
                               <br />
                               
                               <a href="{{='http://%s/%s/%s/addAttr/%s' % (request.env.http_host, request.application, request.controller, request.args[0])}}">Add an Attribute</a>
                               
                               <br />
                                <br />
                         
                         <li><label for="desc">Description:</label>       
                                <textarea name="desc" class="formright" rows="20" cols="50">{{=node.description}}</textarea>
                         </li>
                         
                         <li>       
                                <input type="submit" value="{{if new:}}{{="Create Node"}}{{else:}}{{="Save Changes"}}{{pass}}" />
                         </li>   
                          </ul>  
                                
                  </form>
                
          </fieldset>
    </div> <!-- end editform -->
{{if len(request.args) != 0:}}



{{pass}}
