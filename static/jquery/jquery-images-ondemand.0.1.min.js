// global variables
var _$d = $(document);
var _$w = $(window);
var imgToLoad = 1;

// offset of bottom to load images, on px
var offset = 50;

function imgOndemand(){
     //calc current scroll position
    var scrollPos = _$w.height() + _$w.scrollTop();

    // get imgs not loaded
    $('img.img-ondemand').each(function(){
        var $img = $(this);
        // filter imgs over scroll limit
        if($img.offset().top < scrollPos+offset){
            $img.attr('src',$img.attr('longdesc')).removeClass('img-ondemand')
        }
    });
    imgToLoad = $('img.img-ondemand').length;
}


$(function(){
    imgOndemand();
});

$(window).scroll(function(){
    //if (imgToLoad){
        imgOndemand();
    //}
});
